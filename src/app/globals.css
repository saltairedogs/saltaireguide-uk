/* saltaireguide.uk â€” global styles (v4, zero @apply) */
@import "tailwindcss";
@import "leaflet/dist/leaflet.css";

/* Vintage serif fonts are self-hosted via next/font/local (see src/lib/fonts.ts) */

/* -------------------------------- Tokens --------------------------------- */

:root {
  /* Vintage warm parchment/sepia palette */
  --bg: 35 40% 92%;              /* Light warm parchment */
  --fg: 30 25% 20%;              /* Dark brown ink */
  --muted: 30 15% 45%;           /* Medium brown-grey */
  --muted-2: 35 20% 65%;         /* Light brown-grey */
  --border: 35 25% 80%;          /* Warm border tone */
  --ink: 30 30% 15%;             /* Deep brown-black */
  --accent: 25 40% 35%;          /* Victorian burgundy-brown */
  --accent-2: 35 50% 55%;        /* Warm terracotta */
  --success: 140 45% 40%;        /* Muted sage green */
  --warn: 35 65% 50%;            /* Aged amber */
  --danger: 5 60% 50%;           /* Faded red-brown */

  --radius: 12px;
  --radius-lg: 16px;
  --container: 72rem;
  --container-pad: 16px;
  --header-h: 56px;

  --leading: 1.6;
  --measure: 75ch;
  --measure-narrow: 65ch;
  --measure-wide: 85ch;

  --shadow-sm: 0 1px 2px rgba(0,0,0,.06);
  --shadow: 0 2px 8px rgba(0,0,0,.08);
  --shadow-lg: 0 10px 24px rgba(0,0,0,.12);
}

.dark {
  --bg: 220 13% 10%;
  --fg: 220 14% 96%;
  --muted: 220 10% 70%;
  --muted-2: 220 10% 60%;
  --border: 220 9% 20%;
  --ink: 0 0% 100%;
  --accent: 210 40% 98%;
  --accent-2: 210 90% 70%;
  --success: 142 70% 40%;
  --warn: 38 92% 55%;
  --danger: 0 84% 66%;
}

/* ------------------------------- Base ------------------------------------ */

*, *::before, *::after { box-sizing: border-box; }

html { color-scheme: light; scroll-behavior: smooth; }

body {
  background: hsl(var(--bg));
  color: hsl(var(--fg));
  line-height: var(--leading);
  font-family: var(--font-crimson, Georgia, serif);
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100dvh;
}

::selection { background: hsl(var(--accent)); color: hsl(var(--bg)); }

a {
  color: inherit;
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 4px;
  text-decoration-skip-ink: auto;
}
a:hover { text-decoration-color: hsl(var(--ink)); }

img, svg, video, canvas, audio, iframe, embed, object {
  display: block; max-width: 100%;
}
img { height: auto; border-radius: 0; }

h1, h2, h3, h4, h5, h6 { 
  scroll-margin-top: calc(var(--header-h) + 24px); 
  line-height: 1.25;
  font-family: var(--font-playfair, Georgia, serif);
  font-weight: 600;
  letter-spacing: -0.015em;
}

:focus-visible { outline: 2px dashed hsl(var(--accent-2)); outline-offset: 2px; }

@media (prefers-reduced-motion: reduce) {
  * { animation-duration: .01ms !important; animation-iteration-count: 1 !important; transition-duration: .01ms !important; scroll-behavior: auto !important; }
}

/* ---------------------------- Components --------------------------------- */

.container {
  max-width: var(--container);
  padding-inline: var(--container-pad);
  margin-inline: auto;
}

/* Prose (plugin-free) */
.prose { max-width: var(--measure); }
.prose p + p { margin-top: 1em; }
.prose p { hyphens: auto; }
.prose a { text-decoration: underline; text-underline-offset: 4px; text-decoration-color: #d1d5db; transition: color .2s ease, text-decoration-color .2s ease; }
.prose a:hover { text-decoration-color: #000; }
.prose a:focus-visible { outline: 2px dashed hsl(var(--accent-2)); outline-offset: 3px; border-radius: 4px; }
.prose img { border-radius: 12px; }
.prose figure { margin: 1.25rem 0; }
.prose figcaption { color: #4b5563; font-size: .9rem; }
.prose hr { margin: 2.5rem 0; border: 0; border-top: 1px solid hsl(var(--border)); }
.prose code { background: #f3f4f6; border-radius: 8px; padding: .2em .45em; font-size: .95em; }
.prose pre { border: 1px solid hsl(var(--border)); background: #f9fafb; border-radius: 12px; padding: 1rem; line-height: 1.5; overflow-x: auto; box-shadow: var(--shadow-sm); }
.prose blockquote { border-left: 4px solid #d1d5db; padding-left: 1rem; color: #374151; }
.prose h1, .prose h2, .prose h3 { font-weight: 600; letter-spacing: -0.01em; }
.prose h2 { margin-top: 2rem; }
.prose h3 { margin-top: 1.5rem; }
.prose ul, .prose ol { padding-left: 1.3rem; }
.prose li { margin: .35em 0; }

/* Fluid, elegant heading sizes for long-form reading */
.prose h1 { font-size: clamp(1.9rem, 1.2rem + 2.2vw, 2.6rem); margin: 0 0 .75rem; }
.prose h2 { font-size: clamp(1.4rem, 1.0rem + 1.2vw, 1.8rem); margin-bottom: .5rem; }
.prose h3 { font-size: clamp(1.2rem, .95rem + .7vw, 1.4rem); margin-bottom: .4rem; }
.prose :is(h1, h2, h3) + p { margin-top: .5rem; }

/* Tables */
.table { width: 100%; border-collapse: separate; border-spacing: 0; border: 1px solid hsl(var(--border)); border-radius: 12px; overflow: hidden; }
.table thead th { background: #f9fafb; text-align: left; font-weight: 600; font-size: .95rem; }
.table th, .table td { border-bottom: 1px solid #e5e7eb; padding: 12px; vertical-align: top; }
.table tbody tr:hover td { background: #f9fafb; }

/* Details / FAQ */
details { border: 1px solid #e5e7eb; background: #fff; border-radius: 12px; padding: 16px; }
details[open] { background: #f9fafb; }
details > summary { list-style: none; cursor: pointer; font-weight: 600; }
details > summary::-webkit-details-marker { display: none; }

/* Buttons */
.btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 8px 16px; font-size: .95rem; font-weight: 600; border-radius: 12px; border: 1px solid transparent; transition: background-color .2s, color .2s, border-color .2s, box-shadow .2s; font-family: var(--font-playfair, Georgia, serif); }
.btn:focus-visible { outline: 2px dashed hsl(var(--accent-2)); outline-offset: 2px; }
.btn-primary { background: hsl(var(--accent)); color: hsl(var(--bg)); border: 1px solid hsl(var(--accent)); }
.btn-primary:hover { background: hsl(var(--ink)); border-color: hsl(var(--ink)); }
.btn-outline { border-color: hsl(var(--accent)); color: hsl(var(--accent)); background: hsl(40 35% 96%); }
.btn-outline:hover { background: hsl(var(--accent)); color: hsl(var(--bg)); }
.btn-ghost { background: transparent; color: hsl(var(--fg)); }
.btn-ghost:hover { background: hsl(35 30% 88%); }
.btn-muted { background: hsl(35 30% 88%); color: hsl(var(--fg)); }
.btn-muted:hover { background: hsl(35 25% 82%); }
.btn-sm { padding: 6px 12px; font-size: .8rem; }
.btn-lg { padding: 12px 20px; font-size: 1rem; }

/* Badges */
.badge { display: inline-flex; align-items: center; gap: 6px; border-radius: 999px; border: 1px solid #d1d5db; background: #fff; padding: 6px 10px; font-size: 12px; font-weight: 600; color: #374151; }
.badge-success { border-color: transparent; background: #ecfdf5; color: #065f46; }
.badge-warn { border-color: transparent; background: #fffbeb; color: #92400e; }
.badge-danger { border-color: transparent; background: #fef2f2; color: #991b1b; }

/* Cards */
.card { border: 1px solid hsl(var(--border)); background: hsl(40 35% 96%); border-radius: 16px; box-shadow: 0 2px 4px rgba(50, 40, 30, 0.08); }
.card-hover { transition: box-shadow .2s, transform .2s; }
.card-hover:hover { box-shadow: 0 8px 20px rgba(50, 40, 30, 0.15); transform: translateY(-1px); }
.card-body { padding: 20px; }
.card-muted { background: hsl(35 30% 88%); }

/* Callouts */
.callout { position: relative; border: 1px solid hsl(var(--border)); background: #fff; border-radius: 16px; padding: 16px 16px 16px 20px; font-size: .95rem; }
.callout::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 6px; border-top-left-radius: 16px; border-bottom-left-radius: 16px; background: hsl(var(--accent-2)); }
.callout-success::before { background: hsl(var(--success)); }
.callout-warn::before { background: hsl(var(--warn)); }
.callout-danger::before { background: hsl(var(--danger)); }

/* Breadcrumbs */
.breadcrumbs { display: flex; flex-wrap: wrap; align-items: center; gap: 6px; font-size: .9rem; color: #6b7280; }
.breadcrumbs a { text-decoration: underline; text-underline-offset: 4px; }
.breadcrumbs .sep { color: #9ca3af; }

/* Forms */
.field { display: grid; gap: 4px; }
.label { font-size: .95rem; font-weight: 600; }
.input, .select, .textarea { width: 100%; border-radius: 12px; border: 1px solid #d1d5db; background: #fff; padding: 8px 12px; font-size: .95rem; outline: none; }
.input:focus, .select:focus, .textarea:focus { border-color: #000; }
.textarea { min-height: 120px; }
.hint { font-size: 12px; color: #6b7280; }
.error { font-size: 12px; color: #dc2626; }

/* OG placeholder */
.og-placeholder { width: 100%; aspect-ratio: 1200 / 630; border-radius: 16px; background: #f3f4f6; background-image: radial-gradient(circle at 30% 30%, rgba(0,0,0,.04), transparent 40%), radial-gradient(circle at 70% 70%, rgba(0,0,0,.04), transparent 40%); }

/* Prose width variants */
.prose-narrow { max-width: var(--measure-narrow); }
.prose-wide { max-width: var(--measure-wide); }

.smallprint { font-size: 12px; color: #6b7280; }

/* ------------------------------ Utilities -------------------------------- */

.text-balance { text-wrap: balance; }
.text-pretty { text-wrap: pretty; }

.line-clamp-2, .line-clamp-3, .line-clamp-4 { display: -webkit-box; -webkit-box-orient: vertical; overflow: hidden; }
.line-clamp-2 { -webkit-line-clamp: 2; line-clamp: 2; }
.line-clamp-3 { -webkit-line-clamp: 3; line-clamp: 3; }
.line-clamp-4 { -webkit-line-clamp: 4; line-clamp: 4; }

.grid-auto-fit { display: grid; grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr)); gap: 16px; }

.shadow-soft { box-shadow: var(--shadow-sm); }
.shadow-std { box-shadow: var(--shadow); }
.shadow-elev { box-shadow: var(--shadow-lg); }

.anchor-offset { scroll-margin-top: calc(var(--header-h) + 24px); }

@keyframes fade-in-up { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
.animate-in { animation: fade-in-up .35s ease forwards; }

@keyframes shine { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
.skeleton { background: linear-gradient(90deg, rgba(0,0,0,0.04) 25%, rgba(0,0,0,0.08) 37%, rgba(0,0,0,0.04) 63%); background-size: 400% 100%; animation: shine 1.2s ease-in-out infinite; }

/* ------------------------------- Print ----------------------------------- */

@media print {
  header, nav, .newsletter, .footer, .btn, .callout-danger { display: none !important; }
  body { color: hsl(var(--fg)); background: #fff !important; font-size: 12pt; line-height: 1.4; }
  a { text-decoration: none; color: inherit; }
  .prose { max-width: none; }
  .prose img { page-break-inside: avoid; }
  .table { border-color: #ddd; }
  .card, .callout { box-shadow: none !important; border-color: #ddd !important; }
}

/* ------------------------------- Helpers --------------------------------- */

.ribbon { position: absolute; top: 12px; right: -36px; transform: rotate(35deg); background: #000; color: #fff; padding: 4px 16px; font-size: 12px; letter-spacing: .05em; border-radius: 6px; box-shadow: var(--shadow-sm); }

.avatar { display: inline-flex; width: 36px; height: 36px; align-items: center; justify-content: center; overflow: hidden; border-radius: 999px; background: #f3f4f6; }

.toc-sticky { position: sticky; top: calc(var(--header-h) + 16px); max-height: calc(100dvh - var(--header-h) - 24px); overflow: auto; }

.rhythm > * + * { margin-top: 1rem; }
.rhythm-lg > * + * { margin-top: 1.5rem; }

.next-image-wrapper { position: relative; overflow: hidden; border-radius: var(--radius); }
